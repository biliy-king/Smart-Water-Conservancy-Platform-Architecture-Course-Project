# 应用坐标配置步骤

## 📝 步骤1：整理坐标数据

将收集到的坐标整理成以下格式：

```javascript
const segmentBounds = [
  // 坝段 0（你收集的第一个坝段的坐标）
  [
    [111.15, 30.80, 50],  // 点1
    [111.16, 30.80, 50],  // 点2
    [111.16, 30.79, 50],  // 点3
    [111.15, 30.79, 50]   // 点4（如果有更多点，继续添加）
  ],
  
  // 坝段 1（你收集的第二个坝段的坐标）
  [
    [111.16, 30.80, 50],
    [111.17, 30.80, 50],
    [111.17, 30.79, 50],
    [111.16, 30.79, 50]
  ],
  
  // 坝段 2
  [
    // ... 你的坐标
  ],
  
  // ... 继续添加其他坝段（总共11个坝段，索引0-10）
  
  // 坝段 10（最后一个）
  [
    // ... 你的坐标
  ]
];
```

## 🎯 步骤2：在浏览器控制台应用配置

### 方法1：使用快捷函数（推荐）

1. **打开浏览器控制台**（F12）

2. **将坐标数据复制到控制台**，然后运行：

```javascript
// 将你收集的坐标粘贴到这里
const segmentBounds = [
  // 坝段 0
  [[你的坐标1], [你的坐标2], [你的坐标3], ...],
  // 坝段 1
  [[你的坐标1], [你的坐标2], [你的坐标3], ...],
  // ... 继续添加其他9个坝段
];

// 应用配置（第二个参数 true 表示开启调试模式，显示红色热区）
window.setupMask(segmentBounds, true);
```

### 方法2：直接调用 API

```javascript
// 将你收集的坐标粘贴到这里
const segmentBounds = [
  // 你的11个坝段的坐标
];

// 获取组件引用
const cesiumRef = window.cesiumSceneRef();

// 应用配置
cesiumRef.setMaskConfig({
  enabled: true,           // 启用蒙版模式
  debugMode: true,        // 开启调试模式（显示红色热区，方便查看位置）
  totalSegments: segmentBounds.length,  // 总段数
  segmentBounds: segmentBounds          // 你的坐标数据
});
```

## ✅ 步骤3：查看效果

配置完成后：

1. **查看红色热区**：如果开启了调试模式，你会看到红色半透明的热区覆盖在大坝模型上
2. **测试点击**：点击红色热区，应该能高亮对应的坝段
3. **检查位置**：如果热区位置准确，继续下一步；如果位置不对，需要重新拾取坐标或调整坐标值

## 🔧 步骤4：调整配置（如果需要）

### 如果热区位置不对

1. **重新拾取坐标**：
```javascript
window.startCoordinatePicker()
```

2. **手动微调坐标**：直接修改 `segmentBounds` 数组中的坐标值

3. **重新应用配置**：
```javascript
window.setupMask(segmentBounds, true);
```

### 如果热区位置准确

关闭调试模式，让热区变为完全透明：

```javascript
window.cesiumSceneRef().setMaskConfig({
  debugMode: false  // 关闭调试模式，热区变为完全透明
});
```

## 📋 完整示例

假设你收集到了3个坝段的坐标（实际需要11个）：

```javascript
// 在控制台运行以下代码

// 步骤1：定义坐标数据
const segmentBounds = [
  // 坝段 0
  [
    [111.150000, 30.800000, 50.00],
    [111.160000, 30.800000, 50.00],
    [111.160000, 30.790000, 50.00],
    [111.150000, 30.790000, 50.00]
  ],
  // 坝段 1
  [
    [111.160000, 30.800000, 50.00],
    [111.170000, 30.800000, 50.00],
    [111.170000, 30.790000, 50.00],
    [111.160000, 30.790000, 50.00]
  ],
  // 坝段 2
  [
    [111.170000, 30.800000, 50.00],
    [111.180000, 30.800000, 50.00],
    [111.180000, 30.790000, 50.00],
    [111.170000, 30.790000, 50.00]
  ]
  // ... 继续添加其他8个坝段
];

// 步骤2：应用配置
window.setupMask(segmentBounds, true);

// 步骤3：查看效果（应该能看到红色热区）

// 步骤4：如果位置准确，关闭调试模式
// window.cesiumSceneRef().setMaskConfig({ debugMode: false });
```

## 💡 提示

1. **坐标格式**：确保每个坐标是 `[经度, 纬度, 高度]` 格式
2. **至少3个点**：每个坝段至少需要3个顶点
3. **11个坝段**：需要定义11个坝段（索引0-10）
4. **调试模式**：建议先开启调试模式查看效果，确认无误后再关闭

## 🆘 遇到问题？

- **如果看不到红色热区**：检查是否开启了 `debugMode: true`
- **如果点击热区没反应**：检查是否启用了蒙版模式（`enabled: true`）
- **如果热区位置不对**：重新拾取坐标或手动调整坐标值
